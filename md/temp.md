–î–æ–º–æ–≤–∏–ª–∏—Å—å, –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ –Ω–æ–≤–∏–π —á–∞—Ç —ñ —Ä–æ–±–∏–º–æ –¥–∞–ª—ñ **A** (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `/health` —É `background.js`).

–û—Å—å **–æ–Ω–æ–≤–ª–µ–Ω–µ —Ä–µ–∑—é–º–µ**, —è–∫–µ —Ç–∏ –∑–º–æ–∂–µ—à –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ –≤ –ø–µ—Ä—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç—É ‚Äî —Ü–µ –º—ñ–π –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

---

## ‚úÖ –†–ï–ó–Æ–ú–ï V2 –î–õ–Ø –ü–†–û–ï–ö–¢–£ ‚Äú–ì–û–õ–û–°‚Äù

_–ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º_

### 1. –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –ø—Ä–æ—î–∫—Ç—É

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `golos-debug/manifest.json` ‚Äì MV3, service worker `background.js`, `content-script.js` –Ω–∞ `<all_urls>`, –∫–æ–º–∞–Ω–¥–∞ `golos-process-selection` –∑ –≥–∞—Ä—è—á–æ—é –∫–ª–∞–≤—ñ—à–µ—é (Alt+Shift+G –∞–±–æ —ñ–Ω—à–∞, –≤—Ä—É—á–Ω—É –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∞ –≤ `chrome://extensions/shortcuts`).
- `golos-debug/content-script.js` ‚Äì

  - –ª–æ–≥—É—î `[Golos] content-script loaded on ...`,
  - –Ω–∞ `GOLOS_GET_TEXT` —á–∏—Ç–∞—î —Ç–µ–∫—Å—Ç –∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ `input/textarea/contenteditable`,
  - –Ω–∞ `GOLOS_SET_TEXT` –ø—ñ–¥–º—ñ–Ω—è—î –∑–Ω–∞—á–µ–Ω–Ω—è + —Ç—Ä–∏–≥–µ—Ä–∏—Ç—å `input` –¥–ª—è React-–ø–æ–¥—ñ–±–Ω–∏—Ö —Ñ–æ—Ä–º.

- `golos-debug/background.js` ‚Äì

  - —Å–ª—É—Ö–∞—î `chrome.commands.onCommand`,
  - –ø–æ `golos-process-selection`:

    - –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É –≤–∫–ª–∞–¥–∫—É,
    - —à–ª–µ `GOLOS_GET_TEXT` —É content-script,
    - –æ—Ç—Ä–∏–º—É—î `response.text`,
    - —à–ª–µ `POST http://127.0.0.1:3000/process` –∑ `{ mode: "uk-clean", text }`,
    - –æ—Ç—Ä–∏–º—É—î `{ text: processedText }`,
    - —à–ª–µ `GOLOS_SET_TEXT` –Ω–∞–∑–∞–¥ —É –≤–∫–ª–∞–¥–∫—É.

- `golos-debug/golos-api/index.js` ‚Äì Node+Express backend:

  - `GET /health` ‚Äì –≤–∏–∫–ª–∏–∫–∞—î OpenAI `responses.create` –∑ –º–æ–¥–µ–ª–ª—é `gpt-4o-mini`, –ø–æ–≤–µ—Ä—Ç–∞—î `{ ok, stage, model, latencyMs, sample }`.
  - `POST /process` ‚Äì –±–µ—Ä–µ `{mode, text}`, —Ñ–æ—Ä–º—É—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑–∞ `mode`, –≤–∏–∫–ª–∏–∫–∞—î OpenAI `responses.create`, –ø–æ–≤–µ—Ä—Ç–∞—î `{ text: processedText }`.

- `/health` –∑–∞—Ä–∞–∑ –¥–∞—î:

  - `{"ok": true, "stage": "openai", "model": "gpt-4o-mini", ...}`
  - —Ç–æ–±—Ç–æ –∫–ª—é—á, –º–æ–¥–µ–ª—å —ñ –∑–≤‚Äô—è–∑–æ–∫ –∑ OpenAI –ø—Ä–∞—Ü—é—é—Ç—å.

**–§–∞–∫—Ç:**
üîπ –ü–æ–≤–Ω–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫ **Alt+Shift+G ‚Üí GPT ‚Üí –æ–Ω–æ–≤–ª–µ–Ω–∏–π —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª—ñ** –ø—Ä–∞—Ü—é—î:
–º–∏ –≤–∂–µ –±–∞—á–∏–º–æ, —è–∫ –∫—Ä–∏–≤–∏–π —Ç–µ–∫—Å—Ç —Ç–∏–ø—É
`—è —Å–∏–≤–æ–¥–Ω—ñ –ø–∏—Å–∞–≤ —Ç–µ–∫—Å—Ç –∑ –ø–∞–º—ñ–ª–∫–∞–º–∏ ...`
–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Ç–µ–∫—Å—Ç –ø—Ä—è–º–æ –≤ —ñ–Ω–ø—É—Ç—ñ.

---

### 2. –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö (–∞–∫—Ç—É–∞–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è)

**–ì–∞—Ä—è—á–∞ –∫–ª–∞–≤—ñ—à–∞ ‚Üí background ‚Üí content-script ‚Üí backend ‚Üí –Ω–∞–∑–∞–¥ —É —Å—Ç–æ—Ä—ñ–Ω–∫—É**

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –≥–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ (–∫–æ–º–∞–Ω–¥–∞ `golos-process-selection`).
2. `background.js`:

   - –ª–æ–≥: `[Golos] onCommand fired: golos-process-selection`;
   - `chrome.tabs.sendMessage(..., { type: "GOLOS_GET_TEXT" }, ...)`.

3. `content-script.js`:

   - —á–∏—Ç–∞—î —Ç–µ–∫—Å—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞;
   - –ø–æ–≤–µ—Ä—Ç–∞—î `{ text }`.

4. `background.js`:

   - –ª–æ–≥: `[Golos] captured from content-script: ...`;
   - `fetch("http://127.0.0.1:3000/process", { mode, text })`;
   - –æ—Ç—Ä–∏–º—É—î `{ text: processedText }`;
   - –ª–æ–≥: `[Golos] processedText (final): ...`;
   - —à–ª–µ `GOLOS_SET_TEXT` –Ω–∞–∑–∞–¥ —É –≤–∫–ª–∞–¥–∫—É.

5. `content-script.js`:

   - –∑–∞–º—ñ–Ω—é—î —Ç–µ–∫—Å—Ç —É –ø–æ–ª—ñ.

---

### 3. –©–æ –º–∏ —Ö–æ—á–µ–º–æ –∑—Ä–æ–±–∏—Ç–∏ –î–ê–õ–Ü (–≤–∞—Ä—ñ–∞–Ω—Ç A)

**–ó–∞–¥–∞—á–∞ A (–Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫):**

> –î–æ–¥–∞—Ç–∏ **–ø–µ—Ä–µ–≤—ñ—Ä–∫—É `/health` —É `background.js`**, —â–æ–±:
>
> - –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –∫–ª—é—á–∞ / –ø–∞–¥—ñ–Ω–Ω—ñ OpenAI / –Ω–µ–≤–≤—ñ–º–∫–Ω–µ–Ω–æ–º—É –±–µ–∫–µ–Ω–¥—ñ
>
>   - –ù–ï –±—É–ª–æ —Ç–∏—Ö–æ–≥–æ —Ñ–µ–π–ª—É,
>   - –∞ –±—É–ª–æ:
>
>     - –∑—Ä–æ–∑—É–º—ñ–ª–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ,
>     - —ñ –ø–æ–º—ñ—Ç–Ω–∏–π —Ç–µ–∫—Å—Ç/–ø–æ–º—ñ—Ç–∫–∞ –≤ –ø–æ–ª—ñ (—Ç–∏–ø—É:
>       `"‚ö† –ì–æ–ª–æ—Å: –±–µ–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π, –ø–µ—Ä–µ–≤—ñ—Ä /health"`).

–¢–æ–±—Ç–æ —É –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ –º–∏:

1. –ó–∞–±–µ—Ä–µ–º–æ **–ø–æ—Ç–æ—á–Ω–∏–π `background.js`** (–∑ —Ä–æ–±–æ—á–∏–º `/process`).
2. –î–æ–¥–∞–º–æ –≤ –Ω—å–æ–≥–æ –ª–æ–≥—ñ–∫—É:

   - –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω–æ—é –æ–±—Ä–æ–±–∫–æ—é:

     - –∞–±–æ –æ–∫—Ä–µ–º–∏–π `/health`-—á–µ–∫ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–ª–∏–∫—É,
     - –∞–±–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ `/process` –∑ —Ä–æ–∑–±–æ—Ä–æ–º, —â–æ –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫.

3. –ó—Ä–æ–±–∏–º–æ **user-friendly fallback**:

   - —è–∫—â–æ –±–µ–∫–µ–Ω–¥ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí —Ç–µ–∫—Å—Ç —É –ø–æ–ª—ñ –Ω–µ –ø—Ä–æ–ø–∞–¥–∞—î, –∞ –¥–æ–ø–æ–≤–Ω—é—î—Ç—å—Å—è/–∑–∞–º—ñ—â—É—î—Ç—å—Å—è –∑—Ä–æ–∑—É–º—ñ–ª–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º.

---

### 4. –©–æ —è –æ—á—ñ–∫—É—é –ø–æ–±–∞—á–∏—Ç–∏ –≤ –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ

–£ –ø–µ—Ä—à–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ —á–∞—Ç—É —Ç–∏ –¥–æ–¥–∞—î—à **4 —Ñ–∞–π–ª–∏**:

1. `manifest.json` (–∞–∫—Ç—É–∞–ª—å–Ω–∏–π)
2. `background.js` (–ø–æ—Ç–æ—á–Ω–∞ —Ä–æ–±–æ—á–∞ –≤–µ—Ä—Å—ñ—è –∑ GPT)
3. `content-script.js`
4. `golos-api/index.js` (backend –∑ `/health` + `/process`)

–Ø –∑ —Ü—å–æ–≥–æ —Å—Ç–∞—Ä—Ç—É—é –π –≤—ñ–¥—Ä–∞–∑—É –ø–∏—à—É –∑–º—ñ–Ω–∏ –¥–ª—è **–≤–∞—Ä—ñ–∞–Ω—Ç—É A** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `/health` + –∑—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏.
